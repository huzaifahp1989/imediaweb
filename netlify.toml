[functions]
  node_bundler = "esbuild"

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# Ensure Netlify builds the Vite app and publishes from the correct directory
[build]
  command = "npm run build"
  publish = "dist"

# Provide Firebase env vars during Netlify build so Vite picks them up
[build.environment]
  VITE_FIREBASE_API_KEY = "AIzaSyDLi7mVwWnHp_jFlo6KfIXMZEu1iGpA-YE"
  VITE_FIREBASE_AUTH_DOMAIN = "studio-1726517794-3d5f0.firebaseapp.com"
  VITE_FIREBASE_PROJECT_ID = "studio-1726517794-3d5f0"
  VITE_FIREBASE_STORAGE_BUCKET = "studio-1726517794-3d5f0.firebasestorage.app"
  VITE_FIREBASE_MESSAGING_SENDER_ID = "947105835283"
  VITE_FIREBASE_APP_ID = "1:947105835283:web:95e9cb6011c599093f12e6"
  VITE_ADMIN_EMAIL = "huzaify786@gmail.com"
  # Also provide server-side variable for functions
  ADMIN_EMAIL = "huzaify786@gmail.com"
  VITE_SUPABASE_URL = "https://pmxahrmjxbfzuyqeoraz.supabase.co"
  VITE_SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBteGFocm1qeGJmenV5cWVvcmF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NDUyMzAsImV4cCI6MjA3ODUyMTIzMH0.ZZ05XKZKQksAgKv-Vt3k636u7CBMmdeMg5DxZIRWshw"
  SUPABASE_URL = "https://pmxahrmjxbfzuyqeoraz.supabase.co"
  SUPABASE_SERVICE_ROLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBteGFocm1qeGJmenV5cWVvcmF6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mjk0NTIzMCwiZXhwIjoyMDc4NTIxMjMwfQ.Sh8TY5idHP3U0agpf_NHgpRMh5bO6TrtLt4VU6A9LIg"
