import{r as c,g as w,j as e,m as S,C as k,c as C,T as B,B as p,R as P,a as H,b as U,d as b,S as G,l as O,f as $}from"./index.D4NvwcEx.js";const l={easy:{name:"Pillars of Islam",pairs:[{id:1,text:"Shahadah",match:"Declaration of Faith"},{id:2,text:"Salah",match:"Prayer"},{id:3,text:"Zakat",match:"Charity"},{id:4,text:"Sawm",match:"Fasting"},{id:5,text:"Hajj",match:"Pilgrimage"}]},medium:{name:"Prophets & Miracles",pairs:[{id:1,text:"Prophet Musa",match:"Parting the Sea"},{id:2,text:"Prophet Isa",match:"Speaking from Cradle"},{id:3,text:"Prophet Ibrahim",match:"Saved from Fire"},{id:4,text:"Prophet Sulayman",match:"Command over Jinn"},{id:5,text:"Prophet Muhammad ï·º",match:"Splitting of the Moon"}]},hard:{name:"Arabic Terms",pairs:[{id:1,text:"Tafsir",match:"Explanation",emoji:"ðŸ“–",description:"Tafsir = Explanation of Quran"},{id:2,text:"Surah",match:"Chapter",emoji:"ðŸ“š",description:"Surah = Chapter of Quran"},{id:3,text:"Ayah",match:"Verse",emoji:"âœ¨",description:"Ayah = Verse/Sign"},{id:4,text:"Ummah",match:"Nation",emoji:"ðŸŒ",description:"Ummah = Islamic Nation"},{id:5,text:"Ruku",match:"Bowing",emoji:"ðŸ™‡",description:"Ruku = Bowing in prayer"},{id:6,text:"Kaaba (Makkah)",match:"House of Allah",emoji:"ðŸ•‹",description:"Kaaba in Makkah = House of Allah"}]}};function D({onComplete:m}){const[s,u]=c.useState("easy"),[o,I]=c.useState([]),[d,h]=c.useState([]),[n,v]=c.useState([]),[f,y]=c.useState(0),[M,x]=c.useState(!1),[T,g]=c.useState(0),[N,L]=c.useState(null);c.useEffect(()=>{E(),j()},[s]);const E=async()=>{try{if(await w.auth.isAuthenticated()){const a=await w.auth.me();L(a)}}catch{console.log("User not authenticated")}},j=()=>{const t=l[s],a=[];t.pairs.forEach(i=>{a.push({id:`${i.id}-text`,content:i.text,matchId:i.id,emoji:i.emoji,description:i.description}),a.push({id:`${i.id}-match`,content:i.match,matchId:i.id,emoji:i.emoji,description:i.description})});const r=a.sort(()=>Math.random()-.5);I(r),h([]),v([]),y(0),x(!1)},F=t=>{if(d.length===2||d.includes(t)||n.includes(o[t].matchId))return;const a=[...d,t];if(h(a),a.length===2){y(f+1);const[r,i]=a;o[r].matchId===o[i].matchId?(v([...n,o[r].matchId]),h([]),g(T+20),n.length+1===l[s].pairs.length&&R()):setTimeout(()=>h([]),1e3)}},R=async()=>{const a={easy:100,medium:150,hard:200}[s];if(x(!0),N)try{const r=await O(N,"matching_pairs",{fallbackScore:a})}catch(r){console.error("Error saving score:",r)}},A=()=>{s==="easy"?u("medium"):s==="medium"?u("hard"):m&&m({easy:100,medium:150,hard:200}[s]),x(!1),g(0)};if(M){const t={easy:100,medium:150,hard:200};return e.jsx(S.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(k,{className:"max-w-md mx-auto border-2 border-green-400 shadow-2xl",children:e.jsxs(C,{className:"pt-12 pb-8",children:[e.jsx(B,{className:"w-24 h-24 mx-auto mb-6 text-green-500"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Level Complete! ðŸŽ‰"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:l[s].name}),e.jsx("p",{className:"text-5xl font-bold text-green-600 mb-2",children:t[s]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Points earned in ",f," moves"]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[s!=="hard"?e.jsx(p,{onClick:A,className:"bg-gradient-to-r from-green-500 to-teal-500",children:"Next Level"}):e.jsx(p,{onClick:()=>m&&m(200),className:"bg-gradient-to-r from-green-500 to-teal-500",children:"Complete Game"}),e.jsxs(p,{onClick:j,variant:"outline",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Retry Level"]})]})]})})})}return e.jsxs(k,{className:"max-w-3xl mx-auto shadow-xl",children:[e.jsxs(H,{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{className:"text-2xl",children:"Matching Pairs of Iman"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(b,{className:"bg-white/30 backdrop-blur-sm text-white text-lg px-4 py-2",children:["Moves: ",f]}),e.jsxs(b,{className:"bg-white/30 backdrop-blur-sm text-white text-lg px-4 py-2",children:[n.length,"/",l[s].pairs.length]})]})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:Object.keys(l).map(t=>e.jsx(b,{className:`${s===t?"bg-white text-pink-600":"bg-white/20"} cursor-pointer`,onClick:()=>{u(t),x(!1),g(0)},children:l[t].name},t))})]}),e.jsxs(C,{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:o.map((t,a)=>{const r=d.includes(a)||n.includes(t.matchId);return e.jsx(S.button,{whileHover:{scale:r?1:1.05},whileTap:{scale:.95},onClick:()=>F(a),className:`aspect-square rounded-xl text-sm font-bold transition-all p-2 ${r?n.includes(t.matchId)?"bg-green-500 text-white":"bg-blue-500 text-white":"bg-gradient-to-br from-purple-100 to-pink-100 hover:from-purple-200 hover:to-pink-200"}`,children:r?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[t.emoji&&e.jsx("span",{className:"text-xl mb-1",children:t.emoji}),e.jsx("span",{className:"break-words",children:t.content})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(G,{className:"w-8 h-8 text-pink-400"})})},t.id)})}),e.jsx("div",{className:"flex justify-center gap-3",children:e.jsxs(p,{onClick:j,variant:"outline",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Restart Level"]})})]})]})}D.propTypes={onComplete:$.func};export{D as default};
