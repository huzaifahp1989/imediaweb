import{q as X,r,g as Q,j as e,C as b,a as k,b as z,c as y,m as N,d as W,T as J,B as d,R as _,i as Z,k as ee,A as se,l as te,f as ae}from"./index.BaQrC8Rc.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ne=X("Navigation",ie),K={mecca:{name:"Mecca Maze",emoji:"ðŸ•‹",difficulty:"Easy",gridSize:7,start:{row:0,col:0},end:{row:6,col:6},walls:["1-2","1-3","1-4","2-1","2-4","2-5","3-2","3-3","3-5","4-1","4-3","4-4","5-2","5-4","5-5"],questions:[{position:"3-4",question:"How many days is the Hajj pilgrimage?",options:["3","5","7","10"],correct:1,explanation:"Hajj lasts 5-6 days during Dhul Hijjah."},{position:"5-3",question:"What do we call the running between Safa and Marwah?",options:["Tawaf","Sa'i","Wuquf","Rami"],correct:1,explanation:"Sa'i is the ritual of walking between Safa and Marwah seven times."}],points:50},medina:{name:"Medina Maze",emoji:"ðŸŒ™",difficulty:"Medium",gridSize:9,start:{row:0,col:4},end:{row:8,col:4},walls:["1-2","1-3","1-5","1-6","2-1","2-4","2-7","3-2","3-3","3-5","3-6","4-1","4-4","4-7","5-2","5-3","5-5","5-6","6-1","6-4","6-7","7-2","7-3","7-5","7-6"],questions:[{position:"4-4",question:"What was the original name of Medina before the Hijrah?",options:["Makkah","Yathrib","Taif","Badr"],correct:1,explanation:"Medina was called Yathrib before the Prophet's ï·º migration."},{position:"6-4",question:"Name the two main tribes of Medina that accepted the Prophet ï·º.",options:["Quraysh and Banu Hashim","Aws and Khazraj","Banu Nadir and Banu Qaynuqa","Thaqif and Hawazin"],correct:1,explanation:"The Aws and Khazraj were the two main Arab tribes of Medina."}],points:100},spiritual:{name:"Spiritual Maze",emoji:"âœ¨",difficulty:"Hard",gridSize:11,start:{row:0,col:5},end:{row:10,col:5},walls:["1-2","1-3","1-4","1-6","1-7","1-8","2-1","2-5","2-9","3-2","3-3","3-4","3-6","3-7","3-8","4-1","4-5","4-9","5-2","5-3","5-4","5-6","5-7","5-8","6-1","6-5","6-9","7-2","7-3","7-4","7-6","7-7","7-8","8-1","8-5","8-9","9-2","9-3","9-4","9-6","9-7","9-8"],questions:[{position:"5-5",question:"In which Surah is the Ayat al-Kursi found?",options:["Surah Al-Fatiha","Surah Al-Baqarah","Surah Al-Ikhlas","Surah An-Nas"],correct:1,explanation:"Ayat al-Kursi is verse 255 of Surah Al-Baqarah."},{position:"8-5",question:"What is the name of the treaty between the Muslims and the Quraysh of Mecca?",options:["Treaty of Badr","Treaty of Hudaybiyyah","Treaty of Uhud","Treaty of Tabuk"],correct:1,explanation:"The Treaty of Hudaybiyyah was signed in the year 6 AH."}],points:200}};function re({onComplete:M}){const[t,q]=r.useState(null),[u,h]=r.useState(null),[m,x]=r.useState([]),[n,v]=r.useState(null),[I,A]=r.useState(!1),[l,T]=r.useState(null),[p,g]=r.useState(0),[R,S]=r.useState(!1),[H,U]=r.useState(null);r.useEffect(()=>{D()},[]);const D=async()=>{try{if(await Q.auth.isAuthenticated()){const s=await Q.auth.me();U(s)}}catch{console.log("User not authenticated")}},F=a=>{const s=K[a];q({...s,key:a}),h(s.start),x([`${s.start.row}-${s.start.col}`]),g(0),S(!1)},O=(a,s)=>{const i=t;return!(a<0||a>=i.gridSize||s<0||s>=i.gridSize||i.walls.includes(`${a}-${s}`))},f=a=>{let s=u.row,i=u.col;switch(a){case"up":s--;break;case"down":s++;break;case"left":i--;break;case"right":i++;break;default:return}if(!O(s,i))return;const o={row:s,col:i},c=`${s}-${i}`,j=t.questions.find(w=>w.position===c);j&&!m.includes(c)?v(j):(h(o),x([...m,c]),g(p+1),s===t.end.row&&i===t.end.col&&P())},V=a=>{T(a),A(!0)},Y=()=>{if(l===n.correct){const[s,i]=n.position.split("-").map(Number);h({row:s,col:i}),x([...m,n.position]),g(p+1),s===t.end.row&&i===t.end.col&&P()}else if(m.length>1){const s=m[m.length-2],[i,o]=s.split("-").map(Number);h({row:i,col:o})}v(null),A(!1),T(null)},P=async()=>{S(!0);const a=t.points;if(H)try{await te(H,"maze_of_guidance",{fallbackScore:a})}catch(s){console.error("Error saving score:",s)}},$=()=>{q(null),h(null),x([]),v(null),g(0),S(!1)};return t?R?e.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(b,{className:"max-w-md mx-auto border-2 border-green-400 shadow-2xl",children:e.jsxs(y,{className:"pt-12 pb-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:t.emoji}),e.jsx(J,{className:"w-24 h-24 mx-auto mb-6 text-green-500"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Maze Complete! ðŸŽ‰"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:t.name}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("p",{className:"text-lg",children:[e.jsx("strong",{children:"Moves:"})," ",p]}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[t.points," Points"]})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(d,{onClick:$,className:"bg-gradient-to-r from-green-500 to-teal-500",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Play Again"]}),M&&e.jsx(d,{onClick:()=>M(t.points),variant:"outline",children:"Back to Games"})]})]})})}):n?e.jsxs(b,{className:"max-w-2xl mx-auto shadow-xl",children:[e.jsx(k,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:e.jsx(z,{className:"text-xl",children:"Question at Checkpoint"})}),e.jsxs(y,{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:n.question}),e.jsx("div",{className:"space-y-3",children:n.options.map((a,s)=>e.jsx(N.button,{whileHover:{scale:l===null?1.02:1},whileTap:{scale:.98},onClick:()=>V(s),disabled:l!==null,className:`w-full p-4 rounded-xl text-left font-medium transition-all ${l===null?"bg-gray-100 hover:bg-gray-200 text-gray-900":s===n.correct?"bg-green-500 text-white":l===s?"bg-red-500 text-white":"bg-gray-100 text-gray-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a}),l!==null&&(s===n.correct?e.jsx(Z,{className:"w-6 h-6"}):l===s?e.jsx(ee,{className:"w-6 h-6"}):null)]})},s))}),e.jsx(se,{children:I&&e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 p-4 bg-indigo-50 rounded-xl border-2 border-indigo-200",children:[e.jsx("p",{className:"text-sm font-semibold text-indigo-900 mb-2",children:l===n.correct?"âœ… Correct!":"âŒ Incorrect"}),e.jsx("p",{className:"text-sm text-indigo-800",children:n.explanation})]})}),l!==null&&e.jsx(d,{onClick:Y,className:"w-full mt-6 bg-gradient-to-r from-indigo-600 to-purple-600",size:"lg",children:"Continue"})]})]}):e.jsxs(b,{className:"max-w-3xl mx-auto shadow-xl",children:[e.jsx(k,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(z,{className:"text-xl flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:t.emoji}),t.name]}),e.jsxs(W,{className:"bg-white/30 backdrop-blur-sm text-white px-3 py-1",children:["Moves: ",p]})]})}),e.jsxs(y,{className:"p-6",children:[e.jsx("div",{className:"grid gap-1 mx-auto mb-6",style:{gridTemplateColumns:`repeat(${t.gridSize}, 1fr)`,maxWidth:`${t.gridSize*40}px`},children:Array.from({length:t.gridSize},(a,s)=>Array.from({length:t.gridSize},(i,o)=>{const c=`${s}-${o}`,j=t.walls.includes(c),w=u.row===s&&u.col===o,B=t.start.row===s&&t.start.col===o,E=t.end.row===s&&t.end.col===o,C=m.includes(c),G=t.questions.some(L=>L.position===c);return e.jsx("div",{className:`aspect-square rounded flex items-center justify-center text-xs font-bold transition-all ${j?"bg-gray-800":w?"bg-blue-500 text-white text-lg":E?"bg-green-500 text-white":B?"bg-purple-500 text-white":G&&!C?"bg-amber-300":C?"bg-blue-100":"bg-gray-100"}`,children:w?"ðŸ‘¤":E?"ðŸŽ¯":B?"ðŸš€":G&&!C?"â“":""},c)})).flat()}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(d,{onClick:()=>f("up"),size:"sm",className:"w-20",children:"â†‘"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:()=>f("left"),size:"sm",className:"w-20",children:"â†"}),e.jsx(d,{onClick:()=>f("down"),size:"sm",className:"w-20",children:"â†“"}),e.jsx(d,{onClick:()=>f("right"),size:"sm",className:"w-20",children:"â†’"})]})]}),e.jsx("div",{className:"flex justify-center gap-3 mt-6",children:e.jsxs(d,{onClick:$,variant:"outline",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Restart"]})})]})]}):e.jsxs(b,{className:"max-w-3xl mx-auto shadow-xl",children:[e.jsxs(k,{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:[e.jsxs(z,{className:"text-2xl flex items-center gap-2 justify-center",children:[e.jsx(ne,{className:"w-6 h-6"}),"Maze of Guidance"]}),e.jsx("p",{className:"text-center text-indigo-100 mt-2",children:"Navigate through the maze by answering questions"})]}),e.jsx(y,{className:"p-6",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(K).map(([a,s])=>e.jsxs(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>F(a),className:"p-6 rounded-xl bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 hover:border-indigo-400 transition-all",children:[e.jsx("div",{className:"text-5xl mb-3",children:s.emoji}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:s.name}),e.jsx(W,{className:"mb-2",children:s.difficulty}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.points," points"]})]},a))})})]})}re.propTypes={onComplete:ae.func};export{re as default};
