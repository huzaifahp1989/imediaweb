import{r as t,j as e,m as d,C as P,c as v,T as B,a as E,b as K,S as O,Z as p,P as U,A as Z,B as z,g as A,l as D}from"./index.CFuhSUPN.js";const c=[{question:"What is the first pillar of Islam?",options:["Salah","Shahada","Zakat","Hajj"],correct:1,category:"Pillars",points:2},{question:"Who was the first Prophet?",options:["Prophet Ibrahim","Prophet Adam","Prophet Nuh","Prophet Muhammad"],correct:1,category:"Prophets",points:2},{question:"In which month do Muslims fast?",options:["Rajab","Shaban","Ramadan","Shawwal"],correct:2,category:"Worship",points:2},{question:"How many Surahs are in the Quran?",options:["100","114","120","99"],correct:1,category:"Quran",points:2},{question:"What does 'Salaam' mean?",options:["Hello","Peace","Thank you","Goodbye"],correct:1,category:"Manners",points:2},{question:"Which angel brought revelations to the Prophet ï·º?",options:["Mikail","Israfil","Jibreel","Azrael"],correct:2,category:"Angels",points:2},{question:"What is the Qibla?",options:["A prayer","Direction of prayer","A mosque","Holy book"],correct:1,category:"Worship",points:2},{question:"Who was known as Al-Amin (The Trustworthy)?",options:["Prophet Ibrahim","Prophet Musa","Prophet Muhammad","Prophet Isa"],correct:2,category:"Seerah",points:2},{question:"What should you say before eating?",options:["Alhamdulillah","Bismillah","SubhanAllah","Allahu Akbar"],correct:1,category:"Manners",points:2},{question:"How many daily prayers are there?",options:["3","4","5","6"],correct:2,category:"Worship",points:2}],F=(l,a)=>{const u=l[a],o=[...l].sort(()=>Math.random()-.5),x=o.indexOf(u);return{shuffled:o,newCorrectIndex:x}};function Y({onComplete:l}){const[a,u]=t.useState(0),[o,x]=t.useState(0),[g,C]=t.useState(0),[k,b]=t.useState(null),[i,f]=t.useState(!1),[h,y]=t.useState(0),[q,I]=t.useState(!1),[j,W]=t.useState(null),[M,R]=t.useState([]),[w,Q]=t.useState(0);t.useEffect(()=>{(async()=>{try{if(await A.auth.isAuthenticated()){const n=await A.auth.me();W(n)}}catch{console.log("User not authenticated")}})()},[]),t.useEffect(()=>{const s=c[a],{shuffled:r,newCorrectIndex:n}=F(s.options,s.correct);R(r),Q(n)},[a]);const T=s=>{if(b(s),f(!0),s===w){const m=2+(h>0?1:0);x(o+m),y(h+1),C(g+100/c.length)}else y(0);setTimeout(()=>{a<c.length-1?(u(a+1),b(null),f(!1)):G()},1500)},G=async()=>{if(I(!0),j)try{await D(j,"knowledge_race",{fallbackScore:o})}catch(s){console.error("Error saving game score:",s)}l(o)};if(q)return e.jsx(d.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(P,{className:"max-w-md mx-auto border-2 border-amber-400 shadow-2xl",children:e.jsxs(v,{className:"pt-12 pb-8",children:[e.jsx(d.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:e.jsx(B,{className:"w-24 h-24 mx-auto mb-6 text-amber-500"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Race Finished! ðŸ"}),e.jsxs("p",{className:"text-xl text-gray-600 mb-6",children:["You earned ",e.jsxs("span",{className:"font-bold text-amber-600",children:[o," points!"]})]}),e.jsx("div",{className:"bg-amber-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-700",children:"Great job racing through Islamic knowledge! Keep learning and growing!"})})]})})});const N=c[a];return e.jsxs(P,{className:"max-w-2xl mx-auto shadow-lg",children:[e.jsxs(E,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs(K,{className:"text-2xl flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:"ðŸª"}),"Islam Knowledge Race"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full",children:[e.jsx(O,{className:"w-5 h-5 text-amber-300"}),e.jsxs("span",{className:"font-bold",children:[o," pts"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Question ",a+1," of ",c.length]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4 text-yellow-300"}),"Streak: ",h]})]}),e.jsx(U,{value:g,className:"bg-white/30 h-3"})]})]}),e.jsx(v,{className:"p-8",children:e.jsx(Z,{mode:"wait",children:e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl p-6 mb-4",children:[e.jsx("p",{className:"text-sm text-amber-700 font-semibold mb-2",children:N.category}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:N.question})]})}),e.jsx("div",{className:"grid gap-3",children:M.map((s,r)=>{const n=r===w,S=r===k,m=i&&n,H=i&&S&&!n;return e.jsxs(z,{onClick:()=>!i&&T(r),disabled:i,className:`h-auto py-4 text-lg justify-start transition-all duration-300 ${m?"bg-green-500 hover:bg-green-600 text-white":H?"bg-red-500 hover:bg-red-600 text-white":"bg-white hover:bg-amber-50 text-gray-900 border-2"}`,variant:i?"default":"outline",children:[e.jsx("span",{className:"flex-1 text-left",children:s}),m&&e.jsx(p,{className:"w-6 h-6 ml-2 text-yellow-300"})]},r)})}),h>2&&!i&&e.jsx(d.div,{initial:{scale:0},animate:{scale:1},className:"mt-4 text-center",children:e.jsxs("p",{className:"text-amber-600 font-bold flex items-center justify-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Amazing streak! Keep going! ðŸ”¥"]})})]},a)})})]})}export{Y as default};
