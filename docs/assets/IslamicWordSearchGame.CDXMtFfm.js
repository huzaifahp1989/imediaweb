import{r as u,j as e,C as U,a as K,b as F,c as T,m as B,B as w,T as ee,S as te,R as G,n as se,d as P,o as ae,i as ne,g as j,l as oe,f as le}from"./index.DgGkXgLQ.js";const re={easy:{seerah:["MUHAMMAD","MAKKAH","MADINAH","KHADIJAH","AISHA","FATIMAH","HASAN","JIBREEL","UHUD","BADR","HIJRAH","HIRA"],fiqh:["SALAH","WUDU","ZAKAT","HAJJ","SAWM","QIBLA","ADHAN","IQAMAH","RUKU","SUJUD","FARD","SUNNAH"],quran:["ALLAH","QURAN","JANNAH","ISLAM","IMAN","FATIHA","YASIN","MULK","RAHMAN","NOOR","AYAH","SURAH"],hadith:["SUNNAH","BUKHARI","MUSLIM","HADITH","DEEN","TAQWA","IKHLAS","SABR","SHUKR","TAWBAH","IHSAN","ADAB"],sahabah:["ABU","UMAR","UTHMAN","ALI","BILAL","HAMZA","KHALID","ZAID","TALHA","ZUBAIR","SAAD","ANAS"],allah:["RAHMAN","RAHIM","MALIK","SALAM","AZIZ","KARIM","LATIF","HAKIM","ALEEM","WADUD","RAZZAQ","BASIR"],gridSize:10},medium:{seerah:["IBRAHIM","JIBREEL","KHADIJAH","FAREWELL","HIJRAH","CONQUEST","TABUK","MEDINA","QURAISH","KAABA","TRENCH","TAIF"],fiqh:["TAHARAH","QIBLA","RAMADAN","SADAQAH","FASTING","GHUSL","FITRAH","IFTAR","SUHOOR","TARAWEEH","JUMMAH","TAKBIR"],quran:["FATIHA","BAQARAH","YASIN","RAHMAN","MULK","KAHF","FURQAN","NOOR","MARYAM","YUSUF","IMRAN","TAHA"],hadith:["TAQWA","IKHLAS","SABR","TAWHID","SUNNAH","IHSAN","SHUKR","TAWBAH","ADAB","HALAL","HARAM","RIZQ"],sahabah:["KHADIJAH","FATIMAH","HAMZA","KHALID","ZAID","AISHA","HAFSA","TALHA","ZUBAIR","SAAD","SALMAN","ANAS"],allah:["KARIM","LATIF","HAKIM","AZIZ","WADUD","ALEEM","BASIR","SAMI","QADIR","JALEEL","JAMEEL","RAZZAQ"],gridSize:11},hard:{seerah:["KHADEEJAH","CONQUEST","BADR","UHUD","KHAYBAR","TABUK","TAIF","TRENCH","YAMAMA","MUBAHALA","HUDAIBIYA","ABYSSINIA"],fiqh:["ZAKATUL","FIDYAH","ITIKAF","TAYAMMUM","WITR","TAHARAH","ISTINJA","KHUTBAH","JUMMAH","KHUSHU","TAKBIR","IQAMAH"],quran:["MUMINOON","FURQAN","KAHF","NOOR","YASEEN","WAQIAH","MULK","QALAM","HAQQAH","MAARIJ","INSAN","TARIQ"],hadith:["TAWAKKUL","IHSAN","ADAB","SHUKR","TAQWA","TAWBAH","ZIKR","KHUSHU","SIDQ","AMANAH","HAYAA","HILM"],sahabah:["TALHA","ZUBAIR","SAAD","ANAS","SALMAN","SUHAYB","ABDULLAH","MUADH","UBAYY","ZAYD","USAMA","BILAL"],allah:["GHAFFAR","QAHHAR","WAHHAB","FATTAH","JABBAR","KHAALIQ","BARI","MUQEET","HASIB","JALEEL","KAREEM","RAQEEB"],gridSize:12}},ie=(g,o=6)=>[...g].sort(()=>Math.random()-.5).slice(0,o),Q=(g,o)=>{const{gridSize:l,...i}=re[o],m=i[g]||[],f=ie(m,6),r=Array(l).fill(null).map(()=>Array(l).fill("")),c=[],h=[],d=["horizontal","vertical"];f.forEach(A=>{let p=!1,R=0;const b=1e3;for(;!p&&R<b;){R++;const H=d[Math.floor(Math.random()*d.length)],M=Math.floor(Math.random()*l),L=Math.floor(Math.random()*l);if(ce(r,A,M,L,H,l)){const y=de(r,A,M,L,H);c.push({word:A,positions:y,direction:H}),h.push(A),p=!0}}});for(let A=0;A<l;A++)for(let p=0;p<l;p++)r[A][p]===""&&(r[A][p]=String.fromCharCode(65+Math.floor(Math.random()*26)));return{grid:r,wordPositions:c,words:h}},ce=(g,o,l,i,m,f)=>{if(m==="horizontal"){if(i+o.length>f)return!1}else if(m==="vertical"&&l+o.length>f)return!1;for(let r=0;r<o.length;r++){let c=l,h=i;m==="horizontal"?h=i+r:m==="vertical"&&(c=l+r);const d=g[c][h];if(d!==""&&d!==o[r])return!1}return!0},de=(g,o,l,i,m)=>{const f=[];for(let r=0;r<o.length;r++){let c=l,h=i;m==="horizontal"?h=i+r:m==="vertical"&&(c=l+r),g[c][h]=o[r],f.push({row:c,col:h})}return f};function Ae({onComplete:g}){var Y;const[o,l]=u.useState(null),[i,m]=u.useState(null),[{grid:f,wordPositions:r,words:c},h]=u.useState({grid:[],wordPositions:[],words:[]}),[d,A]=u.useState([]),[p,R]=u.useState(!1),[b,H]=u.useState([]),[M,L]=u.useState(null),[y,D]=u.useState(!1),[E,v]=u.useState(0),z=[{id:"easy",name:"Easy",icon:"ðŸŒ±",color:"from-green-500 to-green-600",description:"6 words - 10x10 grid"},{id:"medium",name:"Medium",icon:"âš¡",color:"from-yellow-500 to-orange-500",description:"6 words - 11x11 grid"},{id:"hard",name:"Hard",icon:"ðŸ”¥",color:"from-red-500 to-red-600",description:"6 words - 12x12 grid"}],W=[{id:"seerah",name:"Seerah",icon:"ðŸ“–",description:"Life of Prophet ï·º"},{id:"fiqh",name:"Fiqh",icon:"ðŸ•Œ",description:"Islamic Rulings"},{id:"quran",name:"Quran",icon:"ðŸ“š",description:"Holy Quran"},{id:"hadith",name:"Hadith",icon:"ðŸ“œ",description:"Prophet's Sayings"},{id:"sahabah",name:"Sahabah",icon:"ðŸ‘¥",description:"Companions"},{id:"allah",name:"Allah's Names",icon:"âœ¨",description:"99 Names"}];u.useEffect(()=>{(async()=>{try{if(await j.auth.isAuthenticated()){const a=await j.auth.me();L(a)}}catch(s){console.log("User not authenticated",s)}})()},[]),u.useEffect(()=>{if(o&&i){const t=Q(i,o);h(t),A([]),v(0),D(!1)}},[o,i]);const Z=async t=>{try{const s=new Date().toISOString().split("T")[0],a=await j.entities.GameScore.filter({user_id:t,created_at_gte:`${s}T00:00:00.000Z`,created_at_lte:`${s}T23:59:59.999Z`});if([...new Set(a.map(S=>S.game_type))].length>=13&&!a.find(x=>x.game_type==="daily_completion_bonus")){await j.entities.GameScore.create({user_id:t,game_type:"daily_completion_bonus",score:10,bonus_points:0,completed:!0});const x=await j.auth.me(),I=Math.min((x.points||0)+10,1500);await j.auth.updateMe({points:I})}}catch(s){console.log("Error checking daily bonus:",s)}};u.useEffect(()=>{o&&i&&c.length>0&&d.length===c.length&&!y&&(async()=>{if(D(!0),M)try{const n=await oe(M,"word_search",{isPerfect:!0,fallbackScore:15});v(n),await Z(M.id)}catch(n){console.error("Error saving game score:",n)}setTimeout(()=>{g&&g(E||15)},2e3)})()},[d,o,i,c,y,M,g,Z]);const k=(t,s)=>{R(!0),H([{row:t,col:s}])},J=(t,s)=>{if(p)if(b.length===1)H([...b,{row:t,col:s}]);else{const a=b[0];if(a.row===t){const n=Math.min(a.col,s),N=Math.max(a.col,s),S=[];for(let x=n;x<=N;x++)S.push({row:t,col:x});H(S)}else if(a.col===s){const n=Math.min(a.row,t),N=Math.max(a.row,t),S=[];for(let x=n;x<=N;x++)S.push({row:x,col:s});H(S)}else if(Math.abs(a.row-t)===Math.abs(a.col-s)){const n=[],N=t>a.row?1:-1,S=s>a.col?1:-1,x=Math.abs(a.row-t)+1;for(let I=0;I<x;I++)n.push({row:a.row+I*N,col:a.col+I*S});H(n)}}},C=()=>{b.length>1&&_(),R(!1),H([])},_=()=>{const t=b.map(n=>f[n.row][n.col]).join(""),s=t.split("").reverse().join(""),a=c.find(n=>(n===t||n===s)&&!d.includes(n));a&&A([...d,a])},O=t=>{if(!p)return;t.preventDefault();const s=t.touches[0],a=document.elementFromPoint(s.clientX,s.clientY);if(a&&a.dataset.row!==void 0&&a.dataset.col!==void 0){const n=parseInt(a.dataset.row,10),N=parseInt(a.dataset.col,10);J(n,N)}},q=(t,s)=>b.some(a=>a.row===t&&a.col===s),$=(t,s)=>r.some(a=>d.includes(a.word)&&a.positions.some(n=>n.row===t&&n.col===s));if(!o)return e.jsxs(U,{className:"max-w-4xl mx-auto shadow-lg",children:[e.jsxs(K,{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white p-8",children:[e.jsx(F,{className:"text-3xl text-center",children:"Choose Your Level"}),e.jsx("p",{className:"text-center mt-2 text-green-100",children:"Find Islamic words hidden in the grid!"})]}),e.jsx(T,{className:"p-8",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:z.map((t,s)=>e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{scale:1.05},children:e.jsxs("button",{onClick:()=>l(t.id),className:`w-full p-8 rounded-2xl bg-gradient-to-br ${t.color} text-white shadow-xl hover:shadow-2xl transition-all duration-300`,children:[e.jsx("div",{className:"text-6xl mb-4",children:t.icon}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-sm opacity-90",children:t.description})]})},t.id))})})]});if(!i)return e.jsxs(U,{className:"max-w-4xl mx-auto shadow-lg",children:[e.jsxs(K,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-8",children:[e.jsx(F,{className:"text-3xl text-center",children:"Choose a Category"}),e.jsx("p",{className:"text-center mt-2 text-blue-100",children:"What would you like to learn about?"})]}),e.jsxs(T,{className:"p-8",children:[e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:W.map((t,s)=>e.jsxs(B.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},onClick:()=>m(t.id),className:"p-6 rounded-xl border-2 border-gray-200 bg-white hover:border-blue-500 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"text-5xl mb-3",children:t.icon}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]},t.id))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(w,{onClick:()=>l(null),variant:"outline",children:"Change Level"})})]})]});if(y){const t=d.length===c.length?5:0,s=E+t;return e.jsx(B.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(U,{className:"max-w-md mx-auto border-2 border-green-400 shadow-2xl",children:e.jsxs(T,{className:"pt-12 pb-8",children:[e.jsx(ee,{className:"w-24 h-24 mx-auto mb-6 text-green-500"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Masha'Allah! ðŸŽ‰"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"You found all the words!"}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 mb-6",children:[e.jsxs("p",{className:"text-4xl font-bold text-green-600 mb-2",children:[E," points"]}),t>0&&e.jsxs("div",{className:"mt-4 p-3 bg-amber-100 rounded-lg border-2 border-amber-400",children:[e.jsxs("p",{className:"text-sm font-bold text-amber-900 flex items-center justify-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 fill-amber-500"}),"Perfect Score Bonus: +",t," points!"]}),e.jsxs("p",{className:"text-lg font-bold text-green-600 mt-2",children:["Total: ",s," points"]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[e.jsx(w,{onClick:()=>{l(null),m(null)},className:"bg-gradient-to-r from-green-500 to-teal-500",children:"New Game"}),e.jsxs(w,{onClick:()=>{const a=Q(i,o);h(a),A([]),v(0),D(!1)},variant:"outline",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Play Again"]})]})]})})})}if(c.length===0)return e.jsx(U,{className:"max-w-4xl mx-auto shadow-lg",children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(se,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Generating puzzle..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait a moment"})]})});const X=o==="easy"?"w-8 h-8 md:w-10 md:h-10":o==="medium"?"w-7 h-7 md:w-9 md:h-9":"w-6 h-6 md:w-8 md:h-8",V=o==="easy"?"text-sm md:text-base":o==="medium"?"text-xs md:text-sm":"text-xs";return e.jsxs(U,{className:"max-w-4xl mx-auto shadow-lg",children:[e.jsx(K,{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs(F,{className:"text-xl md:text-2xl",children:["Islamic Word Search - ",(Y=W.find(t=>t.id===i))==null?void 0:Y.name]}),e.jsxs(P,{className:"bg-white/30 backdrop-blur-sm text-white text-lg px-4 py-2",children:[d.length,"/6 Found"]})]})}),e.jsxs(T,{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Find all 6 Islamic words in the puzzle!"})," Each time you play, new words appear. Click and drag to select words (horizontal or vertical)."]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-700 text-lg",children:"ðŸ” Find these words:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(t=>e.jsxs(P,{variant:d.includes(t)?"default":"outline",className:`text-sm px-3 py-2 ${d.includes(t)?"bg-green-500 text-white":"bg-white text-gray-700 border-2"}`,children:[d.includes(t)&&e.jsx(ne,{className:"w-4 h-4 mr-2"}),t]},t))})]}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsx("div",{className:"grid gap-1 select-none touch-none mx-auto w-fit",style:{gridTemplateColumns:`repeat(${f.length}, minmax(0, 1fr))`},onTouchMove:O,onTouchEnd:C,onMouseLeave:()=>{p&&C()},children:f.map((t,s)=>t.map((a,n)=>e.jsx(B.button,{"data-row":s,"data-col":n,onMouseDown:()=>k(s,n),onMouseEnter:()=>J(s,n),onMouseUp:C,onTouchStart:N=>{N.preventDefault(),k(s,n)},whileHover:{scale:1.1},whileTap:{scale:.95},className:`${X} ${V} rounded-lg font-bold transition-all duration-200 cursor-pointer flex items-center justify-center ${$(s,n)?"bg-green-500 text-white shadow-lg":q(s,n)?"bg-blue-500 text-white scale-105":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:a},`${s}-${n}`)))})}),e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap mt-6",children:[e.jsx(w,{onClick:()=>m(null),variant:"outline",children:"Change Category"}),e.jsx(w,{onClick:()=>l(null),variant:"outline",children:"Change Level"}),e.jsxs(w,{onClick:()=>{const t=Q(i,o);h(t),A([])},className:"bg-gradient-to-r from-green-500 to-teal-500",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"New Puzzle"]})]})]})]})}Ae.propTypes={onComplete:le.func};export{Ae as default};
