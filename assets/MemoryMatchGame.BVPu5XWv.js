import{r as i,g as b,j as e,m as N,C as w,c as y,T as A,B as u,R as v,a as B,b as E,d as k,l as F}from"./index.CTmbMkGJ.js";const m=[{id:1,text:"Allah",emoji:"âœ¨"},{id:2,text:"Muhammad ï·º",emoji:"ðŸ•Œ"},{id:3,text:"Quran",emoji:"ðŸ“–"},{id:4,text:"Salah",emoji:"ðŸ¤²"},{id:5,text:"Jannah",emoji:"ðŸŒ¸"},{id:6,text:"Ramadan",emoji:"ðŸŒ™"},{id:7,text:"Kaaba",emoji:"ðŸ•‹"},{id:8,text:"Zakat",emoji:"ðŸ’"}];function q({onComplete:n}){const[r,C]=i.useState([]),[o,d]=i.useState([]),[l,p]=i.useState([]),[c,j]=i.useState(0),[M,g]=i.useState(!1),[f,S]=i.useState(null);i.useEffect(()=>{G(),x()},[]);const G=async()=>{try{if(await b.auth.isAuthenticated()){const a=await b.auth.me();S(a)}}catch(t){console.log("User not authenticated",t)}},x=()=>{const a=[...m,...m].map((s,h)=>({...s,uniqueId:h})).sort(()=>Math.random()-.5);C(a),d([]),p([]),j(0),g(!1)},T=t=>{if(o.length===2||o.includes(t)||l.includes(r[t].id))return;const a=[...o,t];if(d(a),a.length===2){j(c+1);const[s,h]=a;r[s].id===r[h].id?(p([...l,r[s].id]),d([]),l.length+1===m.length&&R()):setTimeout(()=>d([]),1e3)}},R=async()=>{g(!0);const t=Math.max(100-c*2,20);let a=t;if(f)try{a=await F(f,"memory_match",{fallbackScore:t})}catch(s){console.error("Error saving score:",s)}n&&setTimeout(()=>n(a),2e3)};if(M){const t=Math.max(100-c*2,20);return e.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(w,{className:"max-w-md mx-auto border-2 border-green-400 shadow-2xl",children:e.jsxs(y,{className:"pt-12 pb-8",children:[e.jsx(A,{className:"w-24 h-24 mx-auto mb-6 text-green-500"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Masha'Allah! ðŸŽ‰"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"You found all pairs!"}),e.jsx("p",{className:"text-5xl font-bold text-green-600 mb-2",children:t}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Points earned in ",c," moves"]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(u,{onClick:x,className:"bg-gradient-to-r from-green-500 to-teal-500",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Play Again"]}),n&&e.jsx(u,{onClick:()=>n(t),variant:"outline",children:"Back to Games"})]})]})})})}return e.jsxs(w,{className:"max-w-2xl mx-auto shadow-xl",children:[e.jsx(B,{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(E,{className:"text-2xl",children:"Islamic Memory Match"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{className:"bg-white/30 backdrop-blur-sm text-white text-lg px-4 py-2",children:["Moves: ",c]}),e.jsxs(k,{className:"bg-white/30 backdrop-blur-sm text-white text-lg px-4 py-2",children:[l.length,"/",m.length]})]})]})}),e.jsxs(y,{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:r.map((t,a)=>{const s=o.includes(a)||l.includes(t.id);return e.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(a),className:`aspect-square rounded-xl text-2xl font-bold transition-all duration-300 ${s?l.includes(t.id)?"bg-green-500 text-white":"bg-blue-500 text-white":"bg-gradient-to-br from-purple-100 to-pink-100 hover:from-purple-200 hover:to-pink-200"}`,children:s?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("span",{className:"text-3xl",children:t.emoji}),e.jsx("span",{className:"text-xs",children:t.text})]}):e.jsx("span",{className:"text-4xl",children:"?"})},t.uniqueId)})}),e.jsx("div",{className:"flex justify-center gap-3",children:e.jsxs(u,{onClick:x,variant:"outline",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Restart Game"]})})]})]})}export{q as default};
