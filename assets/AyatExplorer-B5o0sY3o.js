import{r as l,g as C,j as e,m as x,C as y,c as b,T as H,B as n,R,a as S,b as O,p as Q,d as j,i as T,A as F,k as K,l as L,f as D}from"./index-Dh-JI_tc.js";const _=r=>{let s=r.length,i;for(;s!==0;)i=Math.floor(Math.random()*s),s--,[r[s],r[i]]=[r[i],r[s]];return r},M=[{id:1,title:"Surah Al-Fatiha",emoji:"ðŸ“–",type:"scrambled_words_ordering",ayah:"In the name of Allah, the Most Gracious, the Most Merciful",question:"Order the words to form the Ayah:",scrambledWords:["name","Allah","Most","Gracious","Merciful","the","of","In"],correctOrder:["In","the","name","of","Allah","the","Most","Gracious","the","Most","Merciful"],explanation:"This is the opening verse of the Quran, known as Bismillah. We recite it before every Surah except one.",difficulty:"easy",points:30},{id:2,title:"Ayat al-Kursi",emoji:"ðŸŒŸ",type:"scrambled_words_ordering",ayah:"Allah - there is no deity except Him, the Ever-Living, the Sustainer",question:"Order the words to form the Ayah:",scrambledWords:["Allah","no","deity","except","Him","Ever-Living","Sustainer","there","is","the","the","-",","],correctOrder:["Allah","-","there","is","no","deity","except","Him",",","the","Ever-Living",",","the","Sustainer"],explanation:"This is part of Ayat al-Kursi, one of the most powerful verses in the Quran. It's in Surah Al-Baqarah.",difficulty:"medium",points:40},{id:3,title:"Surah Al-Ikhlas",emoji:"ðŸ¤",type:"scrambled_words_ordering",ayah:"Say: He is Allah, the One",question:"Order the words to form the Ayah:",scrambledWords:["Say","He","is","Allah","One","the",":",","],correctOrder:["Say",":","He","is","Allah",",","the","One"],explanation:"Surah Al-Ikhlas teaches us about the Oneness of Allah (Tawhid). The Prophet ï·º said it equals one-third of the Quran.",difficulty:"easy",points:30},{id:4,title:"Kaaba Direction",emoji:"ðŸ•‹",type:"scrambled_words_ordering",ayah:"Turn your face toward the Sacred Mosque (in Makkah)",question:"Order the words to form the Ayah:",scrambledWords:["Turn","your","face","toward","Sacred","Mosque","Makkah","the","in","(",")"],correctOrder:["Turn","your","face","toward","the","Sacred","Mosque","(","in","Makkah",")"],explanation:"Allah commanded Muslims to face the Kaaba in Makkah when praying. This is called the Qibla.",difficulty:"medium",points:40},{id:5,title:"Prayer Times",emoji:"ðŸ•Œ",type:"scrambled_words_ordering",ayah:"Establish prayer at the decline of the sun until the darkness of the night",question:"Order the words to form the Ayah:",scrambledWords:["Establish","prayer","at","decline","sun","until","darkness","night","the","of","the","the"],correctOrder:["Establish","prayer","at","the","decline","of","the","sun","until","the","darkness","of","the","night"],explanation:"This verse reminds us to pray at specific times throughout the day, from Dhuhr until Isha.",difficulty:"hard",points:60},{id:6,title:"The Best of Speech",emoji:"ðŸ—£ï¸",type:"scrambled_words_ordering",ayah:"And who is better in speech than one who invites to Allah",question:"Order the words to form the Ayah:",scrambledWords:["And","who","is","better","speech","than","one","invites","Allah","in","to"],correctOrder:["And","who","is","better","in","speech","than","one","who","invites","to","Allah"],explanation:"This verse teaches us that inviting people to Allah and doing good is the best form of speech.",difficulty:"medium",points:40}];function U({onComplete:r}){const[s,i]=l.useState(null),[o,h]=l.useState([]),[m,u]=l.useState(!1),[c,w]=l.useState(!1),[d,f]=l.useState(0),[p,N]=l.useState([]),[A,E]=l.useState(null),[P,v]=l.useState(!1);l.useEffect(()=>{W()},[]);const W=async()=>{try{if(await C.auth.isAuthenticated()){const a=await C.auth.me();E(a)}}catch{console.log("User not authenticated")}},q=t=>{i(t),u(!1),w(!1),t.type==="scrambled_words_ordering"?h(_([...t.scrambledWords])):(console.warn("Attempted to start an unknown puzzle type:",t.type),h([]))},I=()=>{let t=!1;s.type==="scrambled_words_ordering"&&(t=JSON.stringify(o)===JSON.stringify(s.correctOrder)),w(t),u(!0),t&&(f(d+s.points),N([...p,s.id]),p.length+1===M.length&&setTimeout(()=>B(),2e3))},B=async()=>{v(!0);const t=d;if(A)try{const a=await L(A,"ayat_explorer",{fallbackScore:t});f(a)}catch(a){console.error("Error saving score:",a)}},z=()=>{i(null),f(0),N([]),v(!1)},k=(t,a)=>{const g=[...o],[G]=g.splice(t,1);g.splice(a,0,G),h(g)};return P?e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(y,{className:"max-w-md mx-auto border-2 border-green-400 shadow-2xl",children:e.jsxs(b,{className:"pt-12 pb-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx(H,{className:"w-24 h-24 mx-auto mb-6 text-green-500"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Library Explored! ðŸŽ‰"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"You completed all puzzles!"}),e.jsx("p",{className:"text-5xl font-bold text-green-600 mb-6",children:d}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Total Points Earned"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs(n,{onClick:z,className:"bg-gradient-to-r from-green-500 to-teal-500",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Play Again"]}),r&&e.jsx(n,{onClick:()=>r(d),variant:"outline",children:"Back to Games"})]})]})})}):s?e.jsxs(y,{className:"max-w-2xl mx-auto shadow-xl",children:[e.jsx(S,{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(O,{className:"text-xl flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:s.emoji}),s.title]}),e.jsx(n,{onClick:()=>i(null),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:"Back"})]})}),e.jsxs(b,{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:s.question||s.ayah}),s.type==="scrambled_words_ordering"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-base text-gray-700 mb-4 italic text-center",children:"Arrange the words below to form the correct Ayah."}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:o.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-8 h-8 flex items-center justify-center bg-blue-500 text-white text-md",children:a+1}),e.jsx(x.div,{layout:!0,className:"flex-1 bg-gray-100 p-2 rounded-lg font-medium text-gray-800 border border-gray-200",children:t}),e.jsxs("div",{className:"flex flex-col gap-1",children:[a>0&&e.jsx(n,{size:"sm",variant:"outline",onClick:()=>k(a,a-1),disabled:m,className:"p-1 h-auto",children:"â†‘"}),a<o.length-1&&e.jsx(n,{size:"sm",variant:"outline",onClick:()=>k(a,a+1),disabled:m,className:"p-1 h-auto",children:"â†“"})]})]},t+a))}),s.reference&&e.jsxs("p",{className:"text-sm text-gray-500 mt-4 text-center",children:["Reference: ",s.reference]})]}),e.jsx(F,{children:m&&e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`mt-6 p-4 rounded-xl border-2 ${c?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("p",{className:"font-semibold mb-2 flex items-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-green-900",children:["Correct! +",s.points," points"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-red-900",children:"Incorrect. Try again!"})]})}),c&&s.explanation&&e.jsx("p",{className:"text-sm text-gray-700",children:s.explanation}),!c&&e.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:["Correct Ayah: ",e.jsx("span",{className:"font-semibold",children:s.correctOrder.join(" ")})]})]})}),e.jsx("div",{className:"flex justify-center gap-3 mt-6",children:m?c?e.jsx(n,{onClick:()=>i(null),className:"bg-gradient-to-r from-green-500 to-teal-500",size:"lg",children:"Next Puzzle"}):e.jsx(n,{onClick:()=>{u(!1),h(_([...s.scrambledWords]))},className:"bg-gradient-to-r from-amber-500 to-orange-500",size:"lg",children:"Try Again"}):e.jsx(n,{onClick:I,disabled:o.length===0,className:"bg-gradient-to-r from-cyan-600 to-blue-600",size:"lg",children:"Check Answer"})})]})]}):e.jsxs(y,{className:"max-w-4xl mx-auto shadow-xl",children:[e.jsxs(S,{className:"bg-gradient-to-r from-cyan-600 to-blue-600 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(O,{className:"text-2xl flex items-center gap-2",children:[e.jsx(Q,{className:"w-6 h-6"}),"Ayat Explorer"]}),e.jsxs(j,{className:"bg-white/30 backdrop-blur-sm text-white text-lg px-4 py-2",children:["Score: ",d]})]}),e.jsx("p",{className:"text-center text-cyan-100 mt-2",children:"Order words to form Quranic Ayahs"})]}),e.jsx(b,{className:"p-6",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:M.map(t=>{const a=p.includes(t.id);return e.jsxs(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>q(t),disabled:a,className:`p-6 rounded-xl border-2 transition-all ${a?"bg-green-50 border-green-400 cursor-not-allowed opacity-70":"bg-gradient-to-br from-cyan-50 to-blue-50 border-cyan-200 hover:border-cyan-400"}`,children:[e.jsx("div",{className:"text-5xl mb-3",children:t.emoji}),e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:t.title}),e.jsxs(j,{className:"mb-2",children:[t.points," pts"]}),a&&e.jsxs("div",{className:"mt-2 text-green-600 font-bold flex items-center justify-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),"Completed"]})]},t.id)})})})]})}U.propTypes={onComplete:D.func};export{U as default};
