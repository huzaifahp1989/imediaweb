import{r as a,j as e,m,C as j,c as A,e as U,T as O,a as G,b as E,S as K,d as F,B as S,g as v,l as Q}from"./index.DUDtukud.js";const $=[{sahabah:"Abu Bakr As-Siddiq (RA)",emoji:"â­",storyParts:["Abu Bakr was the Prophet Muhammad's ï·º best friend and closest companion.","When the Prophet ï·º told people about Al-Isra wal Mi'raj, many didn't believe him.","But Abu Bakr (RA) said immediately: 'If he said it, then it is true!'","This is why he was called 'As-Siddiq' - The Truthful One."],moral:"True friendship means believing in and being loyal to your friends, even when others doubt.",quiz:{question:"Why was Abu Bakr called 'As-Siddiq'?",options:["Because he was rich","Because he always believed the Prophet ï·º","Because he was strong","Because he was the oldest"],correct:1},points:2},{sahabah:"Umar ibn Al-Khattab (RA)",emoji:"âš¡",storyParts:["Umar (RA) was known for his incredible strength and bravery.","When he became a Muslim, Islam became much stronger!","As a Caliph, he would walk the streets at night to make sure everyone had what they needed.","One night, he carried a bag of flour on his own shoulders to help a poor family."],moral:"True strength includes being fair, humble, and helping others in need.",quiz:{question:"What did Umar (RA) do at night as a Caliph?",options:["He would sleep","He would check on his people to make sure they had what they needed","He would count money","He would practice fighting"],correct:1},points:2},{sahabah:"Bilal ibn Rabah (RA)",emoji:"ðŸŽµ",storyParts:["Bilal (RA) was a slave with a beautiful, powerful voice.","When he accepted Islam, his master tortured him under the hot sun.","But Bilal would only say 'Ahad, Ahad!' - meaning 'One God, One God!'","The Prophet ï·º chose him to be the first person to call Muslims to prayer!"],moral:"No matter where you come from, if you have faith and stay strong, Allah will honor you.",quiz:{question:"What did Bilal (RA) say when he was being tortured?",options:["Please stop","Ahad, Ahad (One God)","I give up","Help me"],correct:1},points:2},{sahabah:"Khadijah bint Khuwaylid (RA)",emoji:"ðŸ’Ž",storyParts:["Khadijah (RA) was a successful businesswoman in Makkah.","When the Prophet ï·º received his first revelation, she comforted him.","She was the very first person to believe in his message!","She spent her wealth to help spread Islam and support the poor."],moral:"Supporting your family and believing in them is one of the greatest acts of love.",quiz:{question:"Who was the first person to believe in Islam?",options:["Abu Bakr (RA)","Umar (RA)","Khadijah (RA)","Ali (RA)"],correct:2},points:2},{sahabah:"Ali ibn Abi Talib (RA)",emoji:"ðŸ¦",storyParts:["Ali (RA) was the cousin of Prophet Muhammad ï·º and grew up in his house.","When enemies planned to attack the Prophet ï·º at night, Ali slept in his bed!","This brave act helped the Prophet ï·º escape safely to Madinah.","Ali was not just brave in battle, but also very wise and knowledgeable."],moral:"True courage means standing up for what is right and gaining knowledge.",quiz:{question:"What did Ali (RA) do to help the Prophet ï·º escape?",options:["He fought the enemies","He slept in the Prophet's bed to trick the enemies","He called for help","He ran away"],correct:1},points:2},{sahabah:"Uthman ibn Affan (RA)",emoji:"ðŸ“œ",storyParts:["Uthman (RA) was known for his generosity and kindness.","When Muslims needed water, he bought a well and made it free for everyone!","He was so generous that he funded the entire army during hard times.","He also compiled the Quran into one book so everyone could read it the same way."],moral:"Being generous and helping others brings great rewards from Allah.",quiz:{question:"What did Uthman (RA) do with the well?",options:["He kept it for himself","He bought it and made it free for everyone","He sold it","He destroyed it"],correct:1},points:2},{sahabah:"Fatimah bint Muhammad (RA)",emoji:"ðŸŒ¸",storyParts:["Fatimah (RA) was the beloved daughter of Prophet Muhammad ï·º.","She worked hard at home, grinding grain until her hands had marks.","The Prophet ï·º taught her special words to say that were better than a servant.","She was known for her patience, kindness, and strong faith."],moral:"Hard work, patience, and remembering Allah are true treasures.",quiz:{question:"What did the Prophet ï·º teach Fatimah instead of getting a servant?",options:["To complain","Special words to remember Allah","To stop working","To ask others for help"],correct:1},points:2},{sahabah:"Sa'd ibn Abi Waqqas (RA)",emoji:"ðŸ¹",storyParts:["Sa'd (RA) was one of the bravest companions and an expert archer.","In the Battle of Uhud, the Prophet ï·º gave him his own arrows!","The Prophet ï·º said: 'Shoot, Sa'd! May my mother and father be sacrificed for you!'","He protected the Prophet ï·º with incredible courage and skill."],moral:"Courage and skill used to protect others is a noble quality.",quiz:{question:"What weapon was Sa'd (RA) famous for using?",options:["Sword","Bow and arrow","Spear","Shield"],correct:1},points:2},{sahabah:"Aisha bint Abi Bakr (RA)",emoji:"ðŸ“š",storyParts:["Aisha (RA) was one of the most knowledgeable companions.","She memorized and taught thousands of hadiths to people.","Scholars would come from far away to learn from her wisdom.","She was known as 'The Mother of Believers' and a great teacher."],moral:"Knowledge is a treasure, and teaching others is a great deed.",quiz:{question:"What was Aisha (RA) famous for?",options:["Being a warrior","Her knowledge and teaching","Her wealth","Her cooking"],correct:1},points:2}],Y=(c,r)=>{const u=c[r],s=[...c].sort(()=>Math.random()-.5),p=s.indexOf(u);return{shuffled:s,newCorrectIndex:p}};function L({onComplete:c}){const[r,u]=a.useState([]),[s,p]=a.useState(0),[i,g]=a.useState(0),[x,b]=a.useState(!1),[l,f]=a.useState(null),[d,N]=a.useState(0),[k,P]=a.useState(!1),[w,R]=a.useState(null),[q,B]=a.useState([]),[y,C]=a.useState(0);a.useEffect(()=>{(async()=>{try{if(await v.auth.isAuthenticated()){const h=await v.auth.me();R(h)}}catch{console.log("User not authenticated")}})()},[]),a.useEffect(()=>{const t=[...$].sort(()=>Math.random()-.5);u(t)},[]),a.useEffect(()=>{if(x&&r.length>0){const t=r[s],{shuffled:o,newCorrectIndex:h}=Y(t.quiz.options,t.quiz.correct);B(o),C(h)}},[x,s,r]);const H=()=>{const t=r[s];i<t.storyParts.length-1?g(i+1):b(!0)},T=t=>{f(t);const o=r[s];t===y&&N(d+o.points),setTimeout(()=>{s<r.length-1?(p(s+1),g(0),b(!1),f(null)):z()},2e3)},z=async()=>{if(P(!0),w)try{await Q(w,"sahabah_stories",{fallbackScore:d})}catch(t){console.error("Error saving game score:",t)}c(d)};if(r.length===0)return e.jsx("div",{className:"text-center text-lg mt-8",children:"Loading stories..."});if(k)return e.jsx(m.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(j,{className:"max-w-md mx-auto border-2 border-amber-400 shadow-2xl",children:e.jsxs(A,{className:"pt-12 pb-8",children:[e.jsx(m.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:e.jsx(U,{className:"w-24 h-24 mx-auto mb-6 text-amber-500"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Masha'Allah! ðŸŒŸ"}),e.jsxs("p",{className:"text-xl text-gray-600 mb-6",children:["You earned ",e.jsxs("span",{className:"font-bold text-amber-600",children:[d," points!"]})]}),e.jsx("div",{className:"bg-amber-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-700",children:"You've learned about the brave companions of Prophet Muhammad ï·º!"})})]})})});const n=r[s];return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-r from-green-600 to-teal-700 text-white rounded-lg p-3 md:p-4 mb-4 md:mb-6 text-center shadow-md flex flex-col sm:flex-row items-center justify-center gap-2 md:gap-3 w-full max-w-2xl",children:[e.jsx(O,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-300 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:gap-2",children:[e.jsx("p",{className:"font-semibold text-base md:text-lg",children:"Monthly Prize Competition!"}),e.jsx("p",{className:"text-xs md:text-sm text-green-100",children:"(Top scorer wins a prize!)"})]})]}),e.jsxs(j,{className:"max-w-2xl mx-auto shadow-lg w-full",children:[e.jsxs(G,{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[e.jsxs(E,{className:"text-xl md:text-2xl flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl md:text-3xl",children:n.emoji}),e.jsx("span",{className:"text-base md:text-xl",children:"Sahabah Stories"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 md:px-4 py-1.5 md:py-2 rounded-full",children:[e.jsx(K,{className:"w-4 h-4 md:w-5 md:h-5 text-amber-300"}),e.jsxs("span",{className:"font-bold text-sm md:text-base",children:[d," pts"]})]})]}),e.jsxs("p",{className:"text-xs md:text-sm mt-2",children:["Story ",s+1," of ",r.length]})]}),e.jsx(A,{className:"p-4 md:p-8",children:x?e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"mb-4 md:mb-6 px-2",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 md:p-6 mb-4 md:mb-6",children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-2 text-sm md:text-base",children:"Moral of the Story:"}),e.jsx("p",{className:"text-gray-700 text-sm md:text-base leading-relaxed",children:n.moral})]}),e.jsx("h4",{className:"text-lg md:text-xl font-bold text-gray-900 mb-3 md:mb-4 leading-snug",children:n.quiz.question})]}),e.jsx("div",{className:"grid gap-2 md:gap-3",children:q.map((t,o)=>{const h=o===y,M=o===l,W=l!==null&&h,I=l!==null&&M&&!h;return e.jsx(S,{onClick:()=>l===null&&T(o),disabled:l!==null,className:`h-auto py-3 md:py-4 px-3 md:px-4 text-sm md:text-lg justify-start transition-all duration-300 ${W?"bg-green-500 hover:bg-green-600 text-white":I?"bg-red-500 hover:bg-red-600 text-white":"bg-white hover:bg-green-50 text-gray-900 border-2"}`,variant:l!==null?"default":"outline",children:e.jsx("span",{className:"flex-1 text-left leading-snug break-words",children:t})},o)})})]}):e.jsxs(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[e.jsxs("div",{className:"text-center mb-4 md:mb-6 px-2",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:n.sahabah}),e.jsxs(F,{className:"bg-green-100 text-green-800 text-xs md:text-sm",children:["Part ",i+1," of ",n.storyParts.length]})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 md:p-8 mb-4 md:mb-6 min-h-[180px] md:min-h-[200px] flex items-center justify-center",children:e.jsx("p",{className:"text-base md:text-xl text-gray-800 leading-relaxed text-center",children:n.storyParts[i]})}),e.jsx("div",{className:"text-center",children:e.jsx(S,{onClick:H,size:"lg",className:"bg-gradient-to-r from-green-500 to-emerald-500 text-sm md:text-base w-full md:w-auto",children:i<n.storyParts.length-1?"Continue Story":"Take Quiz"})})]},`${s}-${i}`)})]})]})}export{L as default};
