import{q as V,r,g as u,j as e,C as N,a as H,b as I,c as v,m as x,S as W,T as X,B as k,P as Z,A as ee,i as te,k as se}from"./index.BLniS9Uj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ie=V("MapPin",ae),re={easy:[{id:"easy_childhood",stage:"Childhood",emoji:"ðŸ‘¶",question:"Where was Prophet Muhammad ï·º born?",options:["Makkah","Madinah","Egypt","Syria"],correct:0,story:"Prophet Muhammad ï·º was born in Makkah in the year 570 CE. He was known for his honesty even as a child.",points:2},{id:"easy_youth",stage:"Youth",emoji:"ðŸŒŸ",question:"What title was Prophet Muhammad ï·º known by?",options:["Al-Amin","Al-Hakim","Al-Rashid","Al-Karim"],correct:0,story:"He was known as 'Al-Amin' (The Trustworthy) because of his honesty and good character.",points:2},{id:"easy_marriage",stage:"Marriage",emoji:"ðŸ’",question:"Who was the first wife of Prophet Muhammad ï·º?",options:["Aisha","Khadijah","Fatimah","Hafsa"],correct:1,story:"Khadijah (RA) was a wealthy merchant who married the Prophet ï·º. She was his first wife and supporter.",points:2},{id:"easy_revelation",stage:"First Revelation",emoji:"ðŸ“–",question:"Where did Prophet Muhammad ï·º receive the first revelation?",options:["Masjid","Cave of Hira","His home","Market"],correct:1,story:"The first revelation came to him in the Cave of Hira where he used to meditate.",points:2},{id:"easy_orphan",stage:"Early Life",emoji:"ðŸŒ™",question:"Who raised Prophet Muhammad ï·º after his mother passed away?",options:["His father","His grandfather","Abu Bakr","Umar"],correct:1,story:"His grandfather Abdul Muttalib and later his uncle Abu Talib raised him with love and care.",points:2},{id:"easy_honest",stage:"Character",emoji:"â­",question:"What was the Prophet ï·º famous for even before Islam?",options:["Being rich","Being honest and trustworthy","Being a king","Being strong"],correct:1,story:"Even before prophethood, everyone trusted him and called him 'The Trustworthy One'.",points:2}],medium:[{id:"medium_prophethood",stage:"Prophethood",emoji:"ðŸ“–",question:"How old was the Prophet ï·º when he received the first revelation?",options:["30 years","35 years","40 years","45 years"],correct:2,story:"At age 40, Angel Jibreel brought the first revelation in the cave of Hira.",points:2},{id:"medium_persecution",stage:"Persecution",emoji:"ðŸ˜¢",question:"Which uncle protected the Prophet ï·º during early persecution?",options:["Abu Lahab","Abu Talib","Abbas","Hamza"],correct:1,story:"Abu Talib, though not Muslim, protected his nephew from the Quraysh persecution.",points:2},{id:"medium_hijrah",stage:"Hijrah",emoji:"ðŸª",question:"Where did the Prophet ï·º migrate to?",options:["Syria","Egypt","Madinah","Yemen"],correct:2,story:"The Hijrah (migration) to Madinah marked the beginning of the Islamic calendar.",points:2},{id:"medium_companion",stage:"The Companion",emoji:"ðŸ¤",question:"Who accompanied the Prophet ï·º during Hijrah?",options:["Abu Bakr","Umar","Uthman","Ali"],correct:0,story:"Abu Bakr (RA) was the loyal companion who traveled with the Prophet ï·º during the dangerous migration.",points:2},{id:"medium_taif",stage:"Visit to Taif",emoji:"ðŸŒ†",question:"What happened when the Prophet ï·º went to Taif?",options:["They accepted Islam","They threw stones at him","They gave him gifts","They ignored him"],correct:1,story:"The people of Taif rejected him and threw stones, but he prayed for their guidance instead of punishment.",points:2},{id:"medium_cave",stage:"Cave of Thawr",emoji:"ðŸ•Šï¸",question:"What protected the Prophet ï·º in the Cave of Thawr?",options:["A spider's web and bird's nest","A large rock","An army","A river"],correct:0,story:"Allah sent a spider to spin a web and a bird to build a nest at the cave entrance, making it look abandoned.",points:2}],hard:[{id:"hard_madinah",stage:"Madinah",emoji:"ðŸ•Œ",question:"What did the Prophet ï·º build first in Madinah?",options:["Palace","Masjid","School","Market"],correct:1,story:"The Prophet ï·º built Masjid Nabawi and established a community based on faith and brotherhood.",points:2},{id:"hard_treaty",stage:"Treaty of Hudaybiyyah",emoji:"ðŸ“œ",question:"The Treaty of Hudaybiyyah was signed with which tribe?",options:["Aws","Khazraj","Quraysh","Thaqif"],correct:2,story:"This treaty was called a 'clear victory' by Allah, leading to the peaceful conquest of Makkah.",points:2},{id:"hard_conquest",stage:"Conquest of Makkah",emoji:"âš”ï¸",question:"In which year was Makkah conquered?",options:["6 AH","7 AH","8 AH","9 AH"],correct:2,story:"In 8 AH, the Prophet ï·º peacefully conquered Makkah with 10,000 companions, showing mercy to all.",points:2},{id:"hard_farewell",stage:"Farewell Sermon",emoji:"ðŸ—£ï¸",question:"Where did the Prophet ï·º deliver his farewell sermon?",options:["Makkah","Madinah","Mount Arafat","Taif"],correct:2,story:"On Mount Arafat during his last Hajj, he delivered powerful messages about equality and rights.",points:2},{id:"hard_badr",stage:"Battle of Badr",emoji:"âš”ï¸",question:"How many Muslims fought in the Battle of Badr?",options:["100","313","500","1000"],correct:1,story:"With only 313 Muslims against 1000 enemies, Allah gave them victory through faith and courage.",points:2},{id:"hard_isra",stage:"Night Journey",emoji:"ðŸŒ™",question:"During Isra and Mi'raj, how many daily prayers were prescribed?",options:["3","5","7","10"],correct:1,story:"Initially 50 prayers were prescribed, but through the Prophet's requests, Allah reduced it to 5 with the reward of 50.",points:2}]},oe=(b,n)=>{const w=b[n],a=[...b].sort(()=>Math.random()-.5),j=a.indexOf(w);return{shuffled:a,newCorrectIndex:j}};function le({onComplete:b}){const[n,w]=r.useState(null),[a,j]=r.useState([]),[c,M]=r.useState(0),[h,C]=r.useState(0),[B,_]=r.useState(null),[y,A]=r.useState(!1),[E,S]=r.useState(!1),[U,P]=r.useState(!1),[d,D]=r.useState(null),[o,G]=r.useState(null),[L,R]=r.useState([]),[q,z]=r.useState(0),f=[{id:"easy",name:"Easy",icon:"ðŸŒ±",color:"from-green-500 to-green-600",description:"Early Life",count:4},{id:"medium",name:"Medium",icon:"âš¡",color:"from-yellow-500 to-orange-500",description:"Prophethood",count:4},{id:"hard",name:"Hard",icon:"ðŸ”¥",color:"from-red-500 to-red-600",description:"Later Years",count:4}];r.useEffect(()=>{J()},[]),r.useEffect(()=>{n&&d&&O()},[n,d]),r.useEffect(()=>{if(a.length>0&&c<a.length){const t=a[c],{shuffled:s,newCorrectIndex:l}=oe(t.options,t.correct);R(s),z(l)}},[c,a]);const J=async()=>{try{if(await u.auth.isAuthenticated()){const s=await u.auth.me();D(s)}}catch(t){console.log("User not authenticated or error loading user:",t)}},O=async()=>{try{let s=(await u.entities.UserGameProgress.filter({user_id:d.id,game_type:"seerah"}))[0];s||(s=await u.entities.UserGameProgress.create({user_id:d.id,game_type:"seerah",completed_questions:[],highest_difficulty:"easy",total_games_played:0,best_score:0})),G(s),T(s.completed_questions||[])}catch(t){console.error("Error loading progress:",t),T([])}},T=t=>{const s=re[n];let l=s.filter(i=>!t.includes(i.id));l.length===0&&(l=[...s]);for(let i=0;i<3;i++)l=l.sort(()=>Math.random()-.5);const p=f.find(i=>i.id===n),g=p?p.count:4;j(l.slice(0,g))},Y=t=>{_(t),A(!0),t===q&&C(h+a[c].points),setTimeout(()=>{S(!0)},1e3)},F=()=>{c<a.length-1?(M(c+1),_(null),A(!1),S(!1)):K()},K=async()=>{if(P(!0),d&&o)try{const t=a.map(i=>i.id),s=[...new Set([...o.completed_questions||[],...t])],l=f.findIndex(i=>i.id===n),p=f.findIndex(i=>i.id===o.highest_difficulty),g=l>p?n:o.highest_difficulty;await u.entities.UserGameProgress.update(o.id,{completed_questions:s,highest_difficulty:g,total_games_played:(o.total_games_played||0)+1,best_score:Math.max(h,o.best_score||0)}),await u.entities.GameScore.create({user_id:d.id,game_type:"seerah",score:h,completed:!0,difficulty:n,stages_count:a.length}),await u.auth.updateMe({points:(d.points||0)+h})}catch(t){console.error("Error saving game score or updating user progress:",t)}b(h)};if(!n)return e.jsxs(N,{className:"max-w-4xl mx-auto shadow-lg",children:[e.jsxs(H,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-8",children:[e.jsx(I,{className:"text-3xl text-center",children:"Choose Your Journey"}),e.jsx("p",{className:"text-center mt-2 text-blue-100",children:"Select a difficulty level to begin the Seerah adventure!"})]}),e.jsxs(v,{className:"p-8",children:[e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:f.map((t,s)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs("button",{onClick:()=>w(t.id),className:`w-full p-8 rounded-2xl bg-gradient-to-br ${t.color} text-white shadow-xl hover:shadow-2xl transition-all duration-300`,children:[e.jsx("div",{className:"text-6xl mb-4",children:t.icon}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-sm opacity-90",children:t.description}),e.jsxs("p",{className:"text-xs mt-2 opacity-75",children:[t.count," stages"]})]})},t.id))}),o&&o.total_games_played>0&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-8 bg-blue-50 rounded-xl p-6 text-center",children:[e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsx(W,{className:"w-5 h-5 inline text-amber-500 mr-1"})," Your Progress:"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Games Played: ",e.jsx("span",{className:"font-semibold",children:o.total_games_played})," â€¢ Best Score: ",e.jsx("span",{className:"font-semibold",children:o.best_score})," â€¢ Highest Difficulty: ",e.jsx("span",{className:"font-semibold capitalize",children:o.highest_difficulty})]})]})]})]});if(U)return e.jsx(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(N,{className:"max-w-md mx-auto border-2 border-amber-400 shadow-2xl",children:e.jsxs(v,{className:"pt-12 pb-8",children:[e.jsx(x.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:e.jsx(X,{className:"w-24 h-24 mx-auto mb-6 text-amber-500"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Masha'Allah! ðŸŽ‰"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"You completed the Seerah journey!"}),e.jsxs("p",{className:"text-2xl font-bold text-amber-600 mb-6",children:[h," points earned!"]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Difficulty: ",e.jsx("span",{className:"font-bold capitalize",children:n})]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Stages Completed: ",e.jsx("span",{className:"font-bold",children:a.length})]})]}),e.jsx(k,{onClick:()=>{w(null),M(0),C(0),P(!1),_(null),A(!1),S(!1),j([])},className:"bg-gradient-to-r from-blue-500 to-purple-500",children:"Play Again"})]})})});if(!d||!o||a.length===0)return e.jsx(N,{className:"max-w-2xl mx-auto shadow-lg",children:e.jsxs(v,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"â³"}),e.jsx("p",{className:"text-gray-600",children:"Loading journey..."})]})});const m=a[c],Q=(c+1)/a.length*100,$=f.find(t=>t.id===n);return e.jsxs(N,{className:"max-w-2xl mx-auto shadow-lg",children:[e.jsxs(H,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs(I,{className:"text-2xl flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:m.emoji}),"Seerah Adventure"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/30 backdrop-blur-sm px-4 py-2 rounded-full border border-white/40",children:[e.jsx(W,{className:"w-5 h-5 text-yellow-300"}),e.jsxs("span",{className:"font-bold text-white",children:[h," pts"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2 text-white",children:[e.jsx("span",{children:m.stage}),e.jsxs("span",{children:["Stage ",c+1," of ",a.length," â€¢ ",$.name]})]}),e.jsx(Z,{value:Q,className:"bg-white/30"})]})]}),e.jsx(v,{className:"p-4 md:p-8",children:E?e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center px-2",children:[e.jsx("div",{className:"text-5xl md:text-6xl mb-4 md:mb-6",children:m.emoji}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-blue-600 mb-3 md:mb-4",children:m.stage}),e.jsx("div",{className:"bg-blue-50 rounded-xl p-4 md:p-6 mb-4 md:mb-6",children:e.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:m.story})}),e.jsx(k,{onClick:F,size:"lg",className:"bg-gradient-to-r from-blue-500 to-purple-500 w-full md:w-auto",children:c<a.length-1?"Continue Journey":"Complete"})]}):e.jsx(ee,{mode:"wait",children:e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"mb-4 md:mb-6 flex items-start gap-2 md:gap-3 px-2",children:[e.jsx(ie,{className:"w-5 md:w-6 h-5 md:h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsx("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 leading-snug",children:m.question})]}),e.jsx("div",{className:"grid gap-2 md:gap-4",children:L.map((t,s)=>{const l=s===q,p=s===B,g=y&&l,i=y&&p&&!l;return e.jsxs(k,{onClick:()=>!y&&Y(s),disabled:y,className:`h-auto py-3 md:py-4 px-3 md:px-4 text-sm md:text-lg justify-start transition-all duration-300 ${g?"bg-green-500 hover:bg-green-600 text-white":i?"bg-red-500 hover:bg-red-600 text-white":"bg-white hover:bg-blue-50 text-gray-900 border-2"}`,variant:y?"default":"outline",children:[e.jsx("span",{className:"flex-1 text-left leading-snug break-words",children:t}),g&&e.jsx(te,{className:"w-4 md:w-6 h-4 md:h-6 ml-2 flex-shrink-0"}),i&&e.jsx(se,{className:"w-4 md:w-6 h-4 md:h-6 ml-2 flex-shrink-0"})]},s)})})]},m.id)})})]})}export{le as default};
