import{r as a,g as u,j as e,C as w,a as B,b as E,c as A,m as g,S as F,t as G,d as H,B as T,T as V,A as X}from"./index.B58dM-zF.js";const Z={easy:[{id:"easy_heart",question:"Which Surah is called the heart of the Quran?",options:["Surah Al-Fatiha","Surah Yasin","Surah Al-Ikhlas","Surah Al-Mulk"],correct:1,badge:"Surah Scholar",points:2},{id:"easy_count",question:"How many Surahs are in the Quran?",options:["100","114","120","99"],correct:1,badge:"Quran Counter",points:2},{id:"easy_first",question:"Which Surah do we recite in every prayer?",options:["Surah Al-Ikhlas","Surah Al-Fatiha","Surah An-Nas","Surah Al-Falaq"],correct:1,badge:"Prayer Scholar",points:2},{id:"easy_word",question:"What is the first word revealed in the Quran?",options:["Iqra (Read)","Qul (Say)","Ya (O)","Alif Lam Mim"],correct:0,badge:"First Word Expert",points:2},{id:"easy_9",question:"What is the first word of the Quran?",options:["Bismillah","Iqra","Alhamdulillah","Qul"],correct:1,badge:"First Word Scholar",points:2},{id:"easy_10",question:"Which Surah do we recite in every prayer?",options:["Al-Ikhlas","Al-Fatiha","An-Nas","Al-Falaq"],correct:1,badge:"Prayer Expert",points:2},{id:"easy_11",question:"How many parts (Juz) is the Quran divided into?",options:["20","25","30","40"],correct:2,badge:"Quran Structure",points:2},{id:"easy_12",question:"What does 'Bismillah' mean?",options:["Thank God","In the name of Allah","God is great","Praise Allah"],correct:1,badge:"Arabic Scholar",points:2}],medium:[{id:"medium_prophet",question:"Which Prophet is mentioned most in the Quran?",options:["Prophet Muhammad ï·º","Prophet Ibrahim (AS)","Prophet Musa (AS)","Prophet Isa (AS)"],correct:2,badge:"Prophet Expert",points:2},{id:"medium_bismillah",question:"What does 'Bismillah ir-Rahman ir-Rahim' mean?",options:["Praise be to Allah","In the name of Allah, Most Gracious, Most Merciful","There is no god but Allah","Allah is the Greatest"],correct:1,badge:"Bismillah Master",points:2},{id:"medium_longest",question:"What is the longest Surah in the Quran?",options:["Al-Fatiha","Al-Baqarah","Al-Imran","An-Nisa"],correct:1,badge:"Surah Length Expert",points:2},{id:"medium_prophets_count",question:"How many Prophets are mentioned by name in the Quran?",options:["25","20","30","15"],correct:0,badge:"Prophets Counter",points:2},{id:"medium_8",question:"Which Surah is named after a woman?",options:["Maryam","Aisha","Fatimah","Khadijah"],correct:0,badge:"Surah Names Expert",points:2},{id:"medium_9",question:"What is the 'Opening' Surah called?",options:["Al-Baqarah","Al-Fatiha","Al-Ikhlas","An-Nas"],correct:1,badge:"Fatiha Master",points:2},{id:"medium_10",question:"Which Surah talks about the 'Pen'?",options:["Al-Qalam","Al-Alaq","Al-Kafirun","Al-Asr"],correct:0,badge:"Pen Scholar",points:2},{id:"medium_11",question:"How many Surahs start with 'Alif Lam Mim'?",options:["3","4","5","6"],correct:3,badge:"Mystery Letters",points:2}],hard:[{id:"hard_last",question:"What is the last Surah revealed in the Quran?",options:["Al-Fatiha","An-Nasr","Al-Ikhlas","Al-Falaq"],correct:1,badge:"Revelation Scholar",points:2},{id:"hard_years",question:"How many years did the Quran take to be revealed?",options:["10 years","23 years","30 years","40 years"],correct:1,badge:"Timeline Expert",points:2},{id:"hard_protection",question:"Which two Surahs are called Al-Mu'awwidhatayn (the two protective surahs)?",options:["Al-Falaq & An-Nas","Al-Ikhlas & Al-Falaq","An-Nas & Al-Kafirun","Al-Fatiha & Al-Ikhlas"],correct:0,badge:"Protection Master",points:2},{id:"hard_prostration",question:"How many verses of prostration (Sajdah) are in the Quran?",options:["10","14","15","20"],correct:1,badge:"Sajdah Scholar",points:2},{id:"hard_8",question:"Which Surah does not start with Bismillah?",options:["Al-Fatiha","At-Tawbah","Al-Ikhlas","An-Nasr"],correct:1,badge:"Unique Surah",points:2},{id:"hard_9",question:"What is the shortest complete Surah?",options:["Al-Asr","Al-Kawthar","Al-Ikhlas","An-Nasr"],correct:1,badge:"Shortest Surah",points:2},{id:"hard_10",question:"How many times is the word 'Allah' mentioned in the Quran?",options:["1000","2000","2699","3000"],correct:2,badge:"Allah Counter",points:2},{id:"hard_11",question:"Which Surah mentions two Prophets with the same name in different stories?",options:["Al-Baqarah","Maryam","Al-Anbiya","Yusuf"],correct:1,badge:"Prophet Stories",points:2}]},ee=(y,o)=>{const b=y[o],r=[...y].sort(()=>Math.random()-.5),m=r.indexOf(b);return{shuffled:r,newCorrectIndex:m}};function se({onComplete:y}){const[o,b]=a.useState(null),[r,m]=a.useState([]),[l,_]=a.useState(0),[h,Q]=a.useState(0),[U,S]=a.useState(null),[p,j]=a.useState(!1),[f,v]=a.useState([]),[L,P]=a.useState(!1),[c,C]=a.useState(null),[n,M]=a.useState(null),[R,O]=a.useState([]),[I,Y]=a.useState(0),N=[{id:"easy",name:"Easy",icon:"ðŸŒ±",color:"from-green-500 to-green-600",description:"4 questions",count:4},{id:"medium",name:"Medium",icon:"âš¡",color:"from-yellow-500 to-orange-500",description:"4 questions",count:4},{id:"hard",name:"Hard",icon:"ðŸ”¥",color:"from-red-500 to-red-600",description:"4 questions",count:4}];a.useEffect(()=>{K()},[]),a.useEffect(()=>{o&&c&&z()},[o,c]),a.useEffect(()=>{if(r.length>0&&l<r.length){const t=r[l],{shuffled:s,newCorrectIndex:i}=ee(t.options,t.correct);O(s),Y(i)}},[l,r]);const K=async()=>{try{if(await u.auth.isAuthenticated()){const s=await u.auth.me();C(s)}}catch{console.log("User not authenticated"),C(null)}},z=async()=>{if(c)try{let s=(await u.entities.UserGameProgress.filter({user_id:c.id,game_type:"quran_quest"}))[0];s||(s=await u.entities.UserGameProgress.create({user_id:c.id,game_type:"quran_quest",completed_questions:[],highest_difficulty:"easy",total_games_played:0,best_score:0})),M(s),W(s.completed_questions||[])}catch(t){console.error("Error loading progress:",t),W([])}},W=t=>{const s=Z[o];if(!s){console.error("Invalid difficulty selected:",o),m([]);return}let i=s.filter(d=>!t.includes(d.id));i.length===0&&(i=[...s]);for(let d=0;d<3;d++)i=i.sort(()=>Math.random()-.5);const x=N.find(d=>d.id===o),q=i.slice(0,(x==null?void 0:x.count)||s.length);m(q)},D=t=>{S(t),j(!0);const s=r[l];t===I&&(Q(h+s.points),f.includes(s.badge)||v([...f,s.badge])),setTimeout(()=>{l<r.length-1?(_(l+1),S(null),j(!1)):$()},2e3)},$=async()=>{if(P(!0),c&&n)try{const t=r.map(i=>i.id),s=Array.from(new Set([...n.completed_questions||[],...t]));await u.entities.UserGameProgress.update(n.id,{completed_questions:s,highest_difficulty:o,total_games_played:(n.total_games_played||0)+1,best_score:Math.max(h,n.best_score||0)}),await u.entities.GameScore.create({user_id:c.id,game_type:"quran_quest",score:h,completed:!0}),await u.auth.updateMe({points:(c.points||0)+h})}catch(t){console.error("Error saving game score or updating user points:",t)}y(h)};if(!o)return e.jsxs(w,{className:"max-w-4xl mx-auto shadow-lg",children:[e.jsxs(B,{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white p-8",children:[e.jsx(E,{className:"text-3xl text-center",children:"Choose Your Level"}),e.jsx("p",{className:"text-center mt-2 text-green-100",children:"Select difficulty to start Quran Quest!"})]}),e.jsxs(A,{className:"p-8",children:[e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:N.map((t,s)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs("button",{onClick:()=>b(t.id),className:`w-full p-8 rounded-2xl bg-gradient-to-br ${t.color} text-white shadow-xl hover:shadow-2xl transition-all duration-300`,children:[e.jsx("div",{className:"text-6xl mb-4",children:t.icon}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-sm opacity-90",children:t.description})]})},t.id))}),n&&n.total_games_played>0&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-8 bg-green-50 rounded-xl p-6 text-center",children:[e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsx(F,{className:"w-5 h-5 inline text-amber-500"})," Your Stats:"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Games Played: ",n.total_games_played," â€¢ Best Score: ",n.best_score," â€¢ Questions Seen: ",n.completed_questions?n.completed_questions.length:0]})]})]})]});if(L)return e.jsx(g.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-12",children:e.jsx(w,{className:"max-w-md mx-auto border-2 border-green-400 shadow-2xl",children:e.jsxs(A,{className:"pt-12 pb-8",children:[e.jsx(g.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:e.jsx(G,{className:"w-24 h-24 mx-auto mb-6 text-green-500"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Masha'Allah! ðŸ“–"}),e.jsxs("p",{className:"text-xl text-gray-600 mb-2",children:["You earned ",e.jsxs("span",{className:"font-bold text-green-600",children:[h," points!"]})]}),e.jsxs("p",{className:"text-gray-500 mb-6",children:["Badges Earned: ",f.length]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Difficulty: ",e.jsx("span",{className:"font-bold capitalize",children:o})]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Questions Answered: ",r.length]})]}),e.jsx("div",{className:"space-y-2 mb-6",children:f.map((t,s)=>e.jsxs(H,{className:"bg-green-500 text-white mr-2",children:["â­ ",t]},s))}),e.jsx(T,{onClick:()=>{b(null),_(0),Q(0),P(!1),S(null),j(!1),v([]),m([]),M(null)},className:"bg-gradient-to-r from-green-500 to-teal-500",children:"Play Again"})]})})});if(r.length===0)return e.jsx(w,{className:"max-w-2xl mx-auto shadow-lg",children:e.jsxs(A,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"â³"}),e.jsx("p",{className:"text-gray-600",children:"Loading questions..."})]})});const k=r[l],J=N.find(t=>t.id===o);return e.jsxs(w,{className:"max-w-2xl mx-auto shadow-lg",children:[e.jsxs(B,{className:"bg-gradient-to-r from-green-600 to-teal-600 text-white p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs(E,{className:"text-2xl flex items-center gap-2",children:[e.jsx(G,{className:"w-6 h-6"}),"Qur'an Quest"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/30 backdrop-blur-sm px-4 py-2 rounded-full border border-white/40",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-300"}),e.jsxs("span",{className:"font-bold text-white",children:[h," pts"]})]})]}),e.jsxs("div",{className:"bg-white text-gray-900 p-3 rounded-lg text-center text-sm font-bold flex items-center justify-center gap-2 mb-4 shadow-lg",children:[e.jsx(V,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{children:"Monthly Prize Competition! Top scores win!"})]}),e.jsxs("p",{className:"text-sm text-white",children:["Question ",l+1," of ",r.length," â€¢ ",J.name," Mode"]})]}),e.jsx(A,{className:"p-4 md:p-8",children:e.jsx(X,{mode:"wait",children:e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"mb-4 md:mb-6 px-2",children:[e.jsx("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 mb-2 leading-snug",children:k.question}),e.jsxs(H,{className:"bg-green-100 text-green-800 text-xs md:text-sm",children:["Earn Badge: ",k.badge]})]}),e.jsx("div",{className:"grid gap-2 md:gap-4",children:R.map((t,s)=>{const i=s===I,x=s===U,q=p&&i,d=p&&x&&!i;return e.jsx(T,{onClick:()=>!p&&D(s),disabled:p,className:`h-auto py-3 md:py-4 px-3 md:px-4 text-sm md:text-lg justify-start transition-all duration-300 ${q?"bg-green-500 hover:bg-green-600 text-white":d?"bg-red-500 hover:bg-red-600 text-white":"bg-white hover:bg-green-50 text-gray-900 border-2"}`,variant:p?"default":"outline",children:e.jsx("span",{className:"flex-1 text-left leading-snug break-words",children:t})},s)})})]},l)})})]})}export{se as default};
